---
title: 'HMRC'
description: 'Access income and employment data directly from HMRC'
---

## Overview

Teal's HMRC integration enables you to retrieve verified income and employment data directly from His Majesty's Revenue and Customs. This provides a reliable, government-sourced view of a user's financial history, ideal for income verification, lending decisions, and affordability assessments.

### Data Available

Through the HMRC integration, you can access:

| Data Type | Description |
| --------- | ----------- |
| **Employment Income** | Total income and earnings from each employer |
| **Tax Paid** | Tax deducted at source for each employment |
| **Employer Details** | Names of employers on record |
| **Income Period** | The tax year or period the data covers |

### Use Cases

Confirm employment income directly from HMRC records rather than relying on payslips alone

### How It Works

1. Create an account connection with `payroll_provider` set to `hmrc`
2. The user authenticates via the HMRC Government Gateway
3. Teal retrieves income submissions across available tax years
4. Access the data via `GET /hmrc/{user_id}` or manage entries via `/hmrc/entries`

## Creating an HMRC Connection

To establish an HMRC connection, call `POST /accounts` with `payroll_provider` set to `hmrc`. HMRC requires additional authentication parameters in `extra_login_params`.

### Required Parameters

| Parameter | Description |
| --------- | ----------- |
| `unique_tax_reference` | The user's UTR is a 10 or 13-digit number. They can find it on their Business Tax Account, the HMRC app, tax returns, or other documents from HMRC. It may appear as 'UTR', 'reference', or 'official use'. |
| `ni_number` | The user's National Insurance number. They can find it on their payslip, P60, or letters from HMRC. |

### Example Request

```bash
curl --request POST \
  --url https://api.sandbox.goteal.co/accounts \
  --header 'Content-Type: application/json' \
  --header 'X-API-KEY: <api-key>' \
  --data '{
  "user_id": "95a0e70b-fe02-4f47-aef9-2efff279df71",
  "payroll_provider": "hmrc",
  "extra_login_params": {
    "unique_tax_reference": "2622992714",
    "ni_number": "GJ458274B"
  }
}'
```

Once the account is created, the response will include an `authorisation_url`. The user must complete OAuth authentication via this URL, which redirects them to the HMRC Government Gateway. After successful authentication, you can retrieve income data using the `/hmrc` endpoints.

<Note>
HMRC connections require fraud prevention headers. See the [Fraud Headers](#fraud-headers) section below for details.
</Note>

## Fraud Headers

HMRC requires fraud prevention headers on API requests to help protect users' confidential data from criminals and fraudsters. This data supports HMRC's transaction monitoring and is [required by law](https://developer.service.hmrc.gov.uk/guides/fraud-prevention/#why-you-must-send-data) for MTD APIs.

When using the Teal SDK, you must include the appropriate fraud prevention headers based on how your application connects to HMRC.

### Connection Method

Set the `x-teal-connection-method` header to indicate your application's architecture:

| Value | Description |
| ----- | ----------- |
| `WEB_APP_VIA_SERVER` | Your application is web based, connecting to HMRC through intermediary servers |
| `MOBILE_APP_VIA_SERVER` | Your application is installed on a mobile device (phone or tablet) connecting to HMRC through intermediary servers |
| `DESKTOP_APP_VIA_SERVER` | Your application is installed on a desktop (computer or laptop) connecting to HMRC through intermediary servers |

### Common Headers

These headers are required for all connection methods:

| Header | Description |
| ------ | ----------- |
| `x-teal-user-agent` | User agent string from the originating device |
| `x-teal-device-id` | A unique identifier for the originating device (UUID) |
| `x-teal-screen-dimensions` | The screen dimensions of the originating device |
| `x-teal-screen-scaling-factor` | The screen scaling factor of the originating device |
| `x-teal-screen-colour-depth` | The colour depth of the screen |
| `x-teal-window-size` | The width and height of the window in pixels |
| `x-teal-client-timezone` | The timezone of the originating device |

### Web App Headers

Additional headers required for `WEB_APP_VIA_SERVER`:

| Header | Description |
| ------ | ----------- |
| `x-teal-sdk-end-user-ip` | The public IP address of the originating device |

### Mobile App Headers

Additional headers required for `MOBILE_APP_VIA_SERVER`:

| Header | Description |
| ------ | ----------- |
| `x-teal-local-ips` | Local IP addresses of the originating device |
| `x-teal-local-ips-timestamp` | Timestamp when local IPs were collected |
| `x-teal-mobile-app-version` | Version of the mobile application |

### Desktop App Headers

Additional headers required for `DESKTOP_APP_VIA_SERVER`:

| Header | Description |
| ------ | ----------- |
| `x-teal-local-ips` | Local IP addresses of the originating device |
| `x-teal-local-ips-timestamp` | Timestamp when local IPs were collected |
| `x-teal-desktop-app-version` | Version of the desktop application |
| `x-teal-mac-addresses` | MAC addresses of the originating device |
| `x-teal-desktop-app-user-id` | User ID within the desktop application |
